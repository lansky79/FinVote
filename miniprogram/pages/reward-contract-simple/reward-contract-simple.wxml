<!-- pages/reward-contract-simple/reward-contract-simple.wxml -->
<view class="container">
  <view class="page-header">
    <text class="page-title">æ™ºèƒ½åˆçº¦</text>
    <text class="page-desc">è‡ªåŠ¨åŒ–å¥–åŠ±åˆ†å‘ç³»ç»Ÿ</text>
  </view>

  <!-- çŠ¶æ€ä¿¡æ¯ -->
  <view class="status-card">
    <text class="status-text">{{message}}</text>
    <text class="status-desc">{{contracts.length}}ä¸ªåˆçº¦æ­£åœ¨è¿è¡Œ</text>
  </view>

  <!-- åˆ›å»ºåˆçº¦æŒ‰é’® -->
  <view class="create-section">
    <button class="btn-primary create-btn" bindtap="showCreateContract">
      <text class="btn-icon">â•</text>
      <text>åˆ›å»ºæ™ºèƒ½åˆçº¦</text>
    </button>
  </view>

  <!-- åˆçº¦åˆ—è¡¨ -->
  <view class="contract-list">
    <view class="contract-item" wx:for="{{contracts}}" wx:key="id">
      <view class="contract-header">
        <text class="contract-name">{{item.name}}</text>
        <text class="contract-status {{item.status === 'è¿è¡Œä¸­' ? 'active' : 'pending'}}">{{item.status}}</text>
      </view>
      
      <view class="contract-desc">
        <text>{{item.description}}</text>
      </view>
      
      <view class="contract-stats">
        <view class="stat-item">
          <text class="stat-label">æ‰§è¡Œæ¬¡æ•°</text>
          <text class="stat-value">{{item.executed}}æ¬¡</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">ç´¯è®¡å¥–åŠ±</text>
          <text class="stat-value">{{item.totalRewards}}ç§¯åˆ†</text>
        </view>
      </view>
      
      <view class="contract-actions">
        <button class="btn-outline" bindtap="viewContract" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</button>
        <button class="btn-success" bindtap="executeContract" data-id="{{item.id}}">æ‰§è¡Œåˆçº¦</button>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½ä»‹ç» -->
  <view class="feature-intro">
    <view class="intro-title">æ™ºèƒ½åˆçº¦ç‰¹æ€§</view>
    <view class="feature-grid">
      <view class="feature-card">
        <text class="feature-icon">âš¡</text>
        <text class="feature-name">è‡ªåŠ¨æ‰§è¡Œ</text>
      </view>
      <view class="feature-card">
        <text class="feature-icon">ğŸ¯</text>
        <text class="feature-name">ç²¾ç¡®è®¡ç®—</text>
      </view>
      <view class="feature-card">
        <text class="feature-icon">ğŸ”’</text>
        <text class="feature-name">é€æ˜å¯ä¿¡</text>
      </view>
    </view>
  </view>

  <view class="action-buttons">
    <button class="btn-secondary" bindtap="goBack">è¿”å›é¦–é¡µ</button>
  </view>
</view>

<!-- åˆ›å»ºåˆçº¦å¼¹çª— -->
<view class="modal" wx:if="{{showCreateModal}}">
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">åˆ›å»ºæ™ºèƒ½åˆçº¦</text>
      <text class="modal-close" bindtap="hideCreateModal">âœ•</text>
    </view>
    
    <view class="form-group">
      <text class="form-label">åˆçº¦åç§°</text>
      <input 
        class="form-input" 
        placeholder="ä¾‹å¦‚ï¼šæ–°ç”¨æˆ·å¥–åŠ±åˆçº¦"
        value="{{newContract.name}}"
        bindinput="onInput"
        data-field="name"
      />
    </view>

    <view class="form-row">
      <view class="form-group half">
        <text class="form-label">åŸºç¡€å¥–åŠ±</text>
        <input 
          class="form-input" 
          type="number"
          placeholder="10"
          value="{{newContract.baseReward}}"
          bindinput="onInput"
          data-field="baseReward"
        />
      </view>
      <view class="form-group half">
        <text class="form-label">å‡†ç¡®ç‡å¥–åŠ±</text>
        <input 
          class="form-input" 
          type="number"
          placeholder="20"
          value="{{newContract.bonusReward}}"
          bindinput="onInput"
          data-field="bonusReward"
        />
      </view>
    </view>

    <view class="reward-preview">
      <text class="preview-title">å¥–åŠ±è§„åˆ™é¢„è§ˆ</text>
      <text class="preview-text">å‚ä¸æŠ•ç¥¨: {{newContract.baseReward}}ç§¯åˆ†</text>
      <text class="preview-text">é¢„æµ‹æ­£ç¡®: {{newContract.baseReward + newContract.bonusReward}}ç§¯åˆ†</text>
    </view>

    <view class="modal-actions">
      <button class="btn-outline" bindtap="hideCreateModal">å–æ¶ˆ</button>
      <button class="btn-primary" bindtap="createContract">åˆ›å»ºåˆçº¦</button>
    </view>
  </view>
</view>
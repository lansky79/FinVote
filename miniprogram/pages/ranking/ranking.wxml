<!-- pages/ranking/ranking.wxml -->
<view class="container">
  <!-- æ’è¡Œæ¦œå¤´éƒ¨ -->
  <view class="ranking-header card">
    <view class="header-title">
      <text class="title">ç§¯åˆ†æ’è¡Œæ¦œ</text>
      <text class="subtitle text-muted">é¢„æµ‹è¶Šå‡†ç¡®ï¼Œç§¯åˆ†è¶Šé«˜</text>
    </view>
    
    <!-- æˆ‘çš„æ’å -->
    <view class="my-rank" wx:if="{{userInfo}}">
      <view class="rank-info">
        <text class="rank-label">æˆ‘çš„æ’å</text>
        <text class="rank-number text-primary">{{userInfo.rank || '-'}}</text>
      </view>
      <view class="rank-stats">
        <text class="stat-item">ç§¯åˆ†: {{userInfo.points}}</text>
        <text class="stat-item">å‡†ç¡®ç‡: {{userInfo.accuracy}}%</text>
      </view>
    </view>
  </view>

  <!-- å‰ä¸‰å -->
  <view class="top-three" wx:if="{{topUsers.length > 0}}">
    <view class="podium">
      <!-- ç¬¬äºŒå -->
      <view class="podium-item second" wx:if="{{topUsers[1]}}">
        <view class="medal medal-silver">2</view>
        <image class="avatar" src="{{topUsers[1].avatarUrl}}" mode="aspectFill"></image>
        <text class="name">{{topUsers[1].nickName}}</text>
        <text class="points">{{topUsers[1].points}}åˆ†</text>
      </view>
      
      <!-- ç¬¬ä¸€å -->
      <view class="podium-item first" wx:if="{{topUsers[0]}}">
        <view class="crown">ğŸ‘‘</view>
        <view class="medal medal-gold">1</view>
        <image class="avatar" src="{{topUsers[0].avatarUrl}}" mode="aspectFill"></image>
        <text class="name">{{topUsers[0].nickName}}</text>
        <text class="points">{{topUsers[0].points}}åˆ†</text>
      </view>
      
      <!-- ç¬¬ä¸‰å -->
      <view class="podium-item third" wx:if="{{topUsers[2]}}">
        <view class="medal medal-bronze">3</view>
        <image class="avatar" src="{{topUsers[2].avatarUrl}}" mode="aspectFill"></image>
        <text class="name">{{topUsers[2].nickName}}</text>
        <text class="points">{{topUsers[2].points}}åˆ†</text>
      </view>
    </view>
  </view>

  <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
  <view class="ranking-list">
    <view class="list-header">
      <text class="section-title">å®Œæ•´æ’è¡Œæ¦œ</text>
    </view>
    
    <view class="ranking-item" wx:for="{{users}}" wx:key="id">
      <view class="rank-badge rank-{{item.rank <= 3 ? 'top' : 'normal'}}">
        <text class="rank-text">{{item.rank}}</text>
      </view>
      
      <image class="user-avatar" src="{{item.avatarUrl}}" mode="aspectFill"></image>
      
      <view class="user-info">
        <text class="user-name">{{item.nickName}}</text>
        <view class="user-stats">
          <text class="stat">{{item.totalVotes}}æ¬¡æŠ•ç¥¨</text>
          <text class="stat">{{item.accuracy}}%å‡†ç¡®ç‡</text>
        </view>
      </view>
      
      <view class="user-points">
        <text class="points-number">{{item.points}}</text>
        <text class="points-label">ç§¯åˆ†</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore}}">
    <button class="btn-secondary" bindtap="loadMore" disabled="{{loading}}">
      {{loading ? 'åŠ è½½ä¸­...' : 'åŠ è½½æ›´å¤š'}}
    </button>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{users.length === 0 && !loading}}">
    <text class="empty-text">æš‚æ— æ’è¡Œæ•°æ®</text>
  </view>

  <!-- ç™»å½•æç¤º -->
  <view class="login-tip card" wx:if="{{!userInfo}}">
    <text class="tip-text">ç™»å½•åæŸ¥çœ‹æ‚¨çš„æ’å</text>
    <button class="btn-primary" bindtap="handleLogin">ç«‹å³ç™»å½•</button>
  </view>
</view>